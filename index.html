<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>easypay Checkout Demo</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Overpass"
    />
  </head>

  <body>
    <h1>easypay Checkout SDK Demo</h1>
    <div class="options">
      <div class="section">
        <h3>Payment Type:</h3>
        <div class="option">
          <label for="single">Single</label>
          <input
            type="radio"
            id="single"
            name="payment"
            value="single"
            checked
          />
        </div>
        <div class="option">
          <label for="frequent">Frequent</label>
          <input type="radio" id="frequent" name="payment" value="frequent" />
        </div>
        <div class="option">
          <label for="subscription">Subscription</label>
          <input
            type="radio"
            id="subscription"
            name="payment"
            value="subscription"
          />
        </div>
      </div>

      <hr />

      <div class="section">
        <!-- Configurations -->
        <h3>Configuration:</h3>
        <div class="option">
          <label for="operation">Sale / Authorisation</label>
          <select id="operation" name="operation">
            <option value="sale">Sale</option>
            <option value="authorisation">Authorisation</option>
          </select>
        </div>
        <div class="option">
          <label for="hideDetails">Hide details</label>
          <div class="switch" data-toggle="hideDetails">
            <input type="checkbox" id="hideDetails" />
            <span class="slider round"></span>
          </div>
          <label for="hideDetailsButton">Hide details button</label>
          <div class="switch" data-toggle="hideDetailsButton">
            <input type="checkbox" id="hideDetailsButton" />
            <span class="slider round"></span>
          </div>
        </div>
        <div class="option">
          <label for="hideCartButton">Hide cart button</label>
          <div class="switch" data-toggle="hideCartButton">
            <input type="checkbox" id="hideCartButton" />
            <span class="slider round"></span>
          </div>
        </div>
        <div class="option">
          <label for="hideSubscriptionSummary">Hide subscription summary</label>
          <div class="switch" data-toggle="hideSubscriptionSummary">
            <input type="checkbox" id="hideSubscriptionSummary" />
            <span class="slider round"></span>
          </div>
        </div>

        <div class="option">
          <label for="logoUrl">Logo URL</label>
          <div class="switch" data-toggle="logoUrl">
            <input type="checkbox" id="logoUrl" />
            <span class="slider round"></span>
          </div>
        </div>
        <hr class="config-divider" />
        <!-- Advanced config -->

        <div class="switch advanced">
          <input type="checkbox" id="advanced" autocomplete="off" />
          <span class="slider round"></span>
        </div>
        <button class="accordion" id="advancedToggle">Advanced</button>
        <div class="grid">
          <div class="option">
            <label for="inputFloatingLabel">Input floating label</label>
            <div class="switch" data-toggle="inputFloatingLabel">
              <input type="checkbox" id="inputFloatingLabel" checked="true" />
              <span class="slider round"></span>
            </div>
          </div>
          <div class="option">
            <label for="buttonBoxShadow">Button box shadow</label>
            <div class="switch" data-toggle="buttonBoxShadow">
              <input type="checkbox" id="buttonBoxShadow" checked="true" />
              <span class="slider round"></span>
            </div>
          </div>
          <div class="option">
            <label for="inputBorderRadius">Input border radius</label>
            <input type="number" id="inputBorderRadius" />
          </div>
          <div class="option">
            <label for="buttonBorderRadius">Button border radius</label>
            <input type="number" id="buttonBorderRadius" />
          </div>
          <div class="option">
            <label for="baseFontSize">Base font size</label>
            <input type="number" id="baseFontSize" />
          </div>
          <div class="option">
            <label for="backgroundColor">Background color</label>
            <input type="color" id="backgroundColor" />
          </div>
          <div class="option">
            <label for="accentColor">Accent color</label>
            <input type="color" id="accentColor" />
          </div>
          <div class="option">
            <label for="errorColor">Error color</label>
            <input type="color" id="errorColor" />
          </div>
          <div class="option">
            <label for="inputBackgroundColor">Input background color</label>
            <input type="color" id="inputBackgroundColor" />
          </div>
          <div class="option">
            <label for="inputBorderColor">Input border color</label>
            <input type="color" id="inputBorderColor" />
          </div>
          <div class="option">
            <label for="buttonBackgroundColor">Button background color</label>
            <input type="color" id="buttonBackgroundColor" />
          </div>
          <div class="option">
            <label for="buttonTextColor">Button text color</label>
            <input type="color" id="buttonTextColor" />
          </div>
          <div class="option">
            <label for="stepperTextColor">Stepper text color</label>
            <input type="color" id="stepperTextColor" />
          </div>
          <div class="option">
            <label for="linkColor">Link color</label>
            <input type="color" id="linkColor" />
          </div>
          <div class="option">
            <label for="fontFamily">Font</label>
            <select name="fontFamily" id="fontFamily">
              <option value="">Overpass</option>
              <option value="Cursive">Cursive</option>
              <option value="Courier New">Courier New</option>
              <option
                value="https://fonts.gstatic.com/s/akayakanadaka/v16/N0bM2S5CPO5oOQqvazoRRb-8-MfWQZRjBjSE.woff2"
              >
                Akaya Kanadaka
              </option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="container-box">
        <h3>Inline Checkout Demo:</h3>
        <a href="inline" class="submit-config-link">
          <img id="inlineImg" src="images/inline.png" height="400" />
        </a>
        <br />
        <div class="links">
          <a href="inline" class="submit-config-link">Inline &rarr;</a>
        </div>
      </div>
      <hr />
      <div class="container-box">
        <h3>Popup Checkout Demo:</h3>
        <a href="popup" class="submit-config-link">
          <img id="popupImg" src="images/popup.png" height="400" />
        </a>
        <br />
        <div class="links">
          <a href="popup" class="submit-config-link">Popup &rarr;</a>
        </div>
      </div>
    </div>
  </body>
</html>
<script>
  // Cache state
  const config = {
    elements: {},
    values: {},
    checkboxes: [
      'hideDetails',
      'hideDetailsButton',
      'hideCartButton',
      'hideSubscriptionSummary',
      'logoUrl',
      'advanced',
      'inputFloatingLabel',
      'buttonBoxShadow',
    ],
    inputs: [
      'inputBorderRadius',
      'buttonBorderRadius',
      'baseFontSize',
      'backgroundColor',
      'accentColor',
      'errorColor',
      'inputBackgroundColor',
      'inputBorderColor',
      'buttonBackgroundColor',
      'buttonTextColor',
      'stepperTextColor',
      'linkColor',
      'fontFamily',
      'operation',
    ],
  }

  ;(function () {
    config.checkboxes.forEach(
      (id) => (config.elements[id] = document.getElementById(id))
    )
    config.inputs.forEach(
      (id) => (config.elements[id] = document.getElementById(id))
    )

    // Event listeners
    document.querySelectorAll('.switch[data-toggle]').forEach((switchEl) => {
      switchEl.addEventListener('click', () =>
        toggleOption(switchEl.dataset.toggle)
      )
    })

    document
      .getElementById('advancedToggle')
      .addEventListener('click', toggleAccordion)

    document.querySelectorAll('.submit-config-link').forEach((link) => {
      link.addEventListener('click', submitConfig)
    })
    //

    loadFromStorage()
    updateImgAndSlide()
  })()

  function loadFromStorage() {
    config.checkboxes.forEach((id) => {
      const value = sessionStorage.getItem(id) === 'true'
      if (sessionStorage.getItem(id)) {
        config.elements[id].checked = value
      }
      if (id === 'advanced') {
        document
          .getElementById('advancedToggle')
          .classList.toggle('active', value)
      }
    })

    config.inputs.forEach((id) => {
      if (sessionStorage.getItem(id)) {
        config.elements[id].value = sessionStorage.getItem(id)
      }
    })

    storeCurrentValues()
  }

  function storeCurrentValues() {
    config.inputs.forEach((id) => {
      config.values[id] = config.elements[id].value
    })
    config.checkboxes.forEach((id) => {
      config.values[id] = config.elements[id].checked
    })
  }

  function toggleAccordion() {
    this.classList.toggle('active')
    toggleOption('advanced')
  }

  function toggleOption(id) {
    const element = config.elements[id]
    element.checked = !element.checked

    if (id === 'hideDetails' && !element.checked) {
      config.elements.hideDetailsButton.checked = false
    }

    updateImgAndSlide()
  }

  function setPaymentType() {
    ;['single', 'frequent', 'subscription'].forEach((id) => {
      if (document.getElementById(id).checked) {
        sessionStorage.setItem('paymentType', id)
      }
    })
  }

  function submitConfig(e) {
    e?.preventDefault()

    setPaymentType()

    config.checkboxes.forEach((id) => {
      sessionStorage.setItem(id, config.elements[id].checked ? 'true' : 'false')
    })

    sessionStorage.setItem('operation', config.elements.operation.value)

    if (config.elements.advanced.checked) {
      config.inputs
        .filter((id) => id !== 'operation')
        .forEach((id) => {
          const element = config.elements[id]
          if (element.value !== '' && element.value !== config.values[id]) {
            sessionStorage.setItem(id, element.value)
          }
        })
    } else {
      config.inputs
        .filter((id) => id !== 'operation')
        .forEach((id) => {
          sessionStorage.removeItem(id)
        })
    }

    storeCurrentValues()

    if (e && e.currentTarget.href) {
      window.location.href = e.currentTarget.href
    }
  }

  function updateImgAndSlide() {
    const hideDetails = config.elements.hideDetails.checked
    const hideDetailsButton = config.elements.hideDetailsButton.checked
    const hideCartButton = config.elements.hideCartButton.checked
    const logoUrl = config.elements.logoUrl.checked

    if (!hideDetails) {
      config.elements.hideDetailsButton.checked = false
    }

    let imageName = ''
    if (hideDetails) {
      imageName += '_details'
      if (hideDetailsButton) {
        imageName += '_button'
      }
    }
    if (hideCartButton) {
      imageName += '_cart'
    }
    if (logoUrl) {
      imageName += '_logo'
    }
    imageName += '.png'

    document.getElementById('inlineImg').src = `/images/inline${imageName}`
    document.getElementById('popupImg').src = `/images/popup${imageName}`
  }
</script>
<style>
  * {
    font-family: 'Overpass', sans-serif;
    color: #56556b;
  }
  h1 {
    text-align: center;
  }

  h3 {
    color: #0d71f9;
  }
  .container {
    display: flex;
    flex-direction: row;
    width: 100%;
    justify-content: space-between;
    border: 0.5px solid #dadada;
    margin-top: 20px;
  }
  .container-box {
    width: inherit;
    flex-grow: 2;
    text-align: center;
  }
  img {
    pointer-events: all;
    cursor: pointer;
  }
  a {
    color: #f92dd3;
  }
  .links {
    margin: 20px;
  }
  .options {
    display: flex;
    border: 0.5px solid #dadada;
    flex-direction: row;
    justify-content: space-around;
  }
  .option {
    display: inline-flex;
    justify-content: space-between;
    width: 100%;
    padding: 10px 0;
    align-items: center;
  }
  .option:not(:first-of-type) {
    border-top: 1px dashed #ccc;
  }
  .option > * {
    vertical-align: middle;
  }
  .section {
    width: 100%;
    padding: 0 20px;
  }
  .grid {
    display: inline-flex;
    font-size: 14px;
    padding: 0 10px;
    background-color: #eee;
  }
  .switch {
    position: relative;
    display: inline-block;
    width: 40px;
    height: 20px;
    cursor: pointer;
  }
  .switch input {
    opacity: 0;
    width: 0;
    height: 0;
  }
  .switch.advanced {
    position: absolute;
    right: 30px;
    margin: 4px 8.5px;
    pointer-events: none;
  }
  .slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: 0.4s;
  }
  .slider:before {
    position: absolute;
    content: '';
    height: 16px;
    width: 16px;
    left: 2px;
    bottom: 2px;
    background-color: white;
    transition: 0.4s;
  }
  input:checked + .slider {
    background-color: #0d71f9;
  }
  input:focus + .slider {
    box-shadow: 0 0 1px #0d71f9;
  }
  input:checked + .slider:before {
    transform: translateX(20px);
  }
  input::-webkit-outer-spin-button,
  input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
  input[type='number'] {
    width: 40px;
    -moz-appearance: textfield;
  }
  .slider.round {
    border-radius: 34px;
  }
  .slider.round:before {
    border-radius: 50%;
  }
  .accordion {
    background-color: #eee;
    color: #444;
    cursor: pointer;
    width: 100%;
    border: none;
    text-align: left;
    outline: none;
    font-size: 15px;
    padding: 5px 10px;
  }
  .accordion:not(.active) {
    margin-bottom: 10px;
  }
  .accordion.active {
    margin-bottom: 0;
  }
  .accordion.active + .grid {
    display: block;
    margin-bottom: 10px;
  }
  .accordion:not(.active) + .grid {
    display: none;
    margin-bottom: 0;
  }
  .active {
    background-color: #ccc;
  }
  .accordion:after {
    font-size: 14px;
    color: #777;
    float: right;
    margin-right: 10px;
  }
  .config-divider {
    border: 1px solid #0d71f9;
  }

  @media only screen and (max-width: 768px) {
    .container {
      flex-direction: column;
    }
    .option {
      flex-wrap: wrap;
    }
  }
</style>
